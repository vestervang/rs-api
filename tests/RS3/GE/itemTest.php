<?php
/**
 * Created by PhpStorm.
 * User: frederikthomsen
 * Date: 3/22/18
 * Time: 6:12 PM
 */

// Has to start with lowercase for some reason
class itemTest extends \PHPUnit\Framework\TestCase{
	
	protected $json = '{"item":{"icon":"http://services.runescape.com/m=itemdb_rs/1521457336943_obj_sprite.gif?id=4151","icon_large":"http://services.runescape.com/m=itemdb_rs/1521457336943_obj_big.gif?id=4151","id":4151,"type":"Melee weapons - high level","type_icon":"http://www.runescape.com/img/categories/Melee weapons - high level","name":"Abyssal whip","description":"A weapon from the Abyss.","current":{"trend":"neutral","price":"71.0k"},"today":{"trend":"positive","price":"+8"},"members":"true","day30":{"trend":"positive","change":"+1.0%"},"day90":{"trend":"positive","change":"+0.0%"},"day180":{"trend":"negative","change":"-0.0%"}}}';
	protected $history = '{"daily":{"1506124800000":70976,"1506211200000":71085,"1506297600000":71281,"1506384000000":70512,"1506470400000":70542,"1506556800000":71285,"1506643200000":70742,"1506729600000":70329,"1506816000000":69669,"1506902400000":70820,"1506988800000":71578,"1507075200000":71277,"1507161600000":71661,"1507248000000":70983,"1507334400000":71275,"1507420800000":71053,"1507507200000":71255,"1507593600000":70181,"1507680000000":70441,"1507766400000":70439,"1507852800000":70549,"1507939200000":70181,"1508025600000":70011,"1508112000000":70192,"1508198400000":70423,"1508284800000":69962,"1508371200000":70298,"1508457600000":70688,"1508544000000":70398,"1508630400000":70515,"1508716800000":70904,"1508803200000":71770,"1508889600000":70198,"1508976000000":70800,"1509062400000":71304,"1509148800000":71398,"1509235200000":71300,"1509321600000":70033,"1509408000000":70052,"1509494400000":70322,"1509580800000":70548,"1509667200000":70958,"1509753600000":71237,"1509840000000":71237,"1509926400000":70672,"1510012800000":70859,"1510099200000":71214,"1510185600000":71173,"1510272000000":70531,"1510358400000":70717,"1510444800000":70838,"1510531200000":70649,"1510617600000":70649,"1510704000000":70597,"1510790400000":70597,"1510876800000":70519,"1510963200000":70096,"1511049600000":69199,"1511136000000":69997,"1511222400000":70624,"1511308800000":70166,"1511395200000":70330,"1511481600000":70458,"1511568000000":70875,"1511654400000":70729,"1511740800000":68496,"1511827200000":69332,"1511913600000":70331,"1512000000000":70758,"1512086400000":70503,"1512172800000":70121,"1512259200000":70095,"1512345600000":70361,"1512432000000":70233,"1512518400000":70500,"1512604800000":70870,"1512691200000":70468,"1512777600000":69194,"1512864000000":69889,"1512950400000":70054,"1513036800000":70054,"1513123200000":70693,"1513209600000":70637,"1513296000000":70329,"1513382400000":70905,"1513468800000":70108,"1513555200000":70062,"1513641600000":70907,"1513728000000":70637,"1513814400000":70427,"1513900800000":69978,"1513987200000":69901,"1514073600000":69287,"1514160000000":68351,"1514246400000":70293,"1514332800000":70429,"1514419200000":70481,"1514505600000":70755,"1514592000000":70463,"1514678400000":70816,"1514764800000":70469,"1514851200000":68847,"1514937600000":69094,"1515024000000":70273,"1515110400000":70813,"1515196800000":71031,"1515283200000":70823,"1515369600000":70844,"1515456000000":70917,"1515542400000":70855,"1515628800000":70604,"1515715200000":70408,"1515801600000":70660,"1515888000000":70062,"1515974400000":70066,"1516060800000":70592,"1516147200000":70952,"1516233600000":71447,"1516320000000":70201,"1516406400000":69715,"1516492800000":69627,"1516579200000":69734,"1516665600000":70545,"1516752000000":70520,"1516838400000":70630,"1516924800000":71111,"1517011200000":71184,"1517097600000":69165,"1517184000000":69721,"1517270400000":70449,"1517356800000":70012,"1517443200000":70845,"1517529600000":70978,"1517616000000":70194,"1517702400000":70736,"1517788800000":71015,"1517875200000":70634,"1517961600000":70959,"1518048000000":70595,"1518134400000":70554,"1518220800000":70523,"1518307200000":70666,"1518393600000":70635,"1518480000000":70670,"1518566400000":70929,"1518652800000":70514,"1518739200000":70635,"1518825600000":70463,"1518912000000":70372,"1518998400000":69871,"1519084800000":70436,"1519171200000":70543,"1519257600000":70402,"1519344000000":70443,"1519430400000":71112,"1519516800000":70286,"1519603200000":69802,"1519689600000":68267,"1519776000000":68729,"1519862400000":69181,"1519948800000":68701,"1520035200000":70196,"1520121600000":70204,"1520208000000":70635,"1520294400000":69861,"1520380800000":69802,"1520467200000":70642,"1520553600000":71002,"1520640000000":71029,"1520726400000":70815,"1520812800000":70785,"1520899200000":69135,"1520985600000":70809,"1521072000000":71278,"1521158400000":71136,"1521244800000":70803,"1521331200000":71123,"1521417600000":70678,"1521504000000":70975,"1521590400000":70983},"average":{"1506124800000":70117,"1506211200000":70130,"1506297600000":70182,"1506384000000":70207,"1506470400000":70282,"1506556800000":70319,"1506643200000":70321,"1506729600000":70314,"1506816000000":70287,"1506902400000":70328,"1506988800000":70372,"1507075200000":70404,"1507161600000":70453,"1507248000000":70495,"1507334400000":70535,"1507420800000":70567,"1507507200000":70623,"1507593600000":70633,"1507680000000":70646,"1507766400000":70650,"1507852800000":70669,"1507939200000":70676,"1508025600000":70713,"1508112000000":70733,"1508198400000":70768,"1508284800000":70775,"1508371200000":70769,"1508457600000":70752,"1508544000000":70715,"1508630400000":70686,"1508716800000":70684,"1508803200000":70707,"1508889600000":70671,"1508976000000":70680,"1509062400000":70706,"1509148800000":70709,"1509235200000":70728,"1509321600000":70718,"1509408000000":70731,"1509494400000":70714,"1509580800000":70680,"1509667200000":70669,"1509753600000":70655,"1509840000000":70664,"1509926400000":70643,"1510012800000":70637,"1510099200000":70636,"1510185600000":70669,"1510272000000":70672,"1510358400000":70681,"1510444800000":70691,"1510531200000":70706,"1510617600000":70727,"1510704000000":70741,"1510790400000":70747,"1510876800000":70765,"1510963200000":70759,"1511049600000":70709,"1511136000000":70696,"1511222400000":70699,"1511308800000":70675,"1511395200000":70627,"1511481600000":70635,"1511568000000":70638,"1511654400000":70619,"1511740800000":70522,"1511827200000":70456,"1511913600000":70466,"1512000000000":70490,"1512086400000":70496,"1512172800000":70482,"1512259200000":70453,"1512345600000":70424,"1512432000000":70390,"1512518400000":70384,"1512604800000":70385,"1512691200000":70360,"1512777600000":70294,"1512864000000":70273,"1512950400000":70250,"1513036800000":70224,"1513123200000":70226,"1513209600000":70225,"1513296000000":70216,"1513382400000":70227,"1513468800000":70213,"1513555200000":70212,"1513641600000":70269,"1513728000000":70290,"1513814400000":70284,"1513900800000":70277,"1513987200000":70263,"1514073600000":70224,"1514160000000":70140,"1514246400000":70125,"1514332800000":70190,"1514419200000":70228,"1514505600000":70242,"1514592000000":70232,"1514678400000":70243,"1514764800000":70254,"1514851200000":70213,"1514937600000":70171,"1515024000000":70172,"1515110400000":70182,"1515196800000":70188,"1515283200000":70200,"1515369600000":70255,"1515456000000":70289,"1515542400000":70315,"1515628800000":70334,"1515715200000":70324,"1515801600000":70325,"1515888000000":70316,"1515974400000":70288,"1516060800000":70304,"1516147200000":70334,"1516233600000":70352,"1516320000000":70337,"1516406400000":70314,"1516492800000":70302,"1516579200000":70296,"1516665600000":70338,"1516752000000":70411,"1516838400000":70422,"1516924800000":70445,"1517011200000":70468,"1517097600000":70415,"1517184000000":70390,"1517270400000":70378,"1517356800000":70363,"1517443200000":70430,"1517529600000":70492,"1517616000000":70490,"1517702400000":70487,"1517788800000":70487,"1517875200000":70480,"1517961600000":70484,"1518048000000":70473,"1518134400000":70463,"1518220800000":70461,"1518307200000":70469,"1518393600000":70468,"1518480000000":70489,"1518566400000":70517,"1518652800000":70515,"1518739200000":70504,"1518825600000":70471,"1518912000000":70477,"1518998400000":70482,"1519084800000":70509,"1519171200000":70536,"1519257600000":70532,"1519344000000":70529,"1519430400000":70545,"1519516800000":70518,"1519603200000":70471,"1519689600000":70442,"1519776000000":70408,"1519862400000":70366,"1519948800000":70323,"1520035200000":70301,"1520121600000":70275,"1520208000000":70290,"1520294400000":70261,"1520380800000":70220,"1520467200000":70220,"1520553600000":70222,"1520640000000":70236,"1520726400000":70245,"1520812800000":70254,"1520899200000":70203,"1520985600000":70209,"1521072000000":70229,"1521158400000":70236,"1521244800000":70245,"1521331200000":70262,"1521417600000":70269,"1521504000000":70289,"1521590400000":70326}}';
	
	public function testIcon(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals('http://services.runescape.com/m=itemdb_rs/1521457336943_obj_sprite.gif?id=4151', $item->getIcon());
	
	}
	
	public function testicon_large(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals('http://services.runescape.com/m=itemdb_rs/1521457336943_obj_big.gif?id=4151', $item->geticonLarge());
		
	}
	
	public function testId(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals(4151, $item->getId());
		
	}
	
	public function testType(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals('Melee weapons - high level', $item->getType());
		
	}
	
	public function testtype_icon(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals('http://www.runescape.com/img/categories/Melee weapons - high level', $item->gettypeIcon());
		
	}
	
	public function testName(){
		
		$data = json_decode($this->json)->item;
		$history = json_decode($this->history);
		
		$item = new \vestervang\rsApi\RS3\GE\Item(
			$data->icon,
			$data->icon_large,
			$data->id,
			$data->type,
			$data->type_icon,
			$data->name,
			$data->current->price,
			$history
		);
		
		$this->assertEquals('Abyssal whip', $item->getName());
		
	}
}
